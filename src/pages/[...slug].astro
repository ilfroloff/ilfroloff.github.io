---
import { getCollection } from "astro:content";
import arrayDateComparator from "src/utils/array-date-comparator";
import type { InferGetStaticPropsType, GetStaticPaths } from "astro";

export const getStaticPaths = (async () => {
  const allArticles = await getCollection("articles");
  const sorted = allArticles.sort(
    arrayDateComparator((item) => item.data.publishedAt),
  );

  return sorted.map((article) => ({
    params: {
      slug: article.slug,
    },
    props: {
      article: article,
    },
  }));
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { article } = Astro.props as Props;
const { Content } = await article.render();
---

<Content />
