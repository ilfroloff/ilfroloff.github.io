---
import { getCollection } from "astro:content";
import arrayDateComparator from "src/utils/array-date-comparator";
import type { GetStaticPaths, InferGetStaticPropsType } from "astro";

export const getStaticPaths = (async () => {
  const allArticles = await getCollection("articles");
  const allReactions = await getCollection("reactions");
  const sorted = [...allArticles, ...allReactions].sort(
    arrayDateComparator((item) => item.data.publishedAt),
  );

  return sorted.map((entry) => ({
    params: {
      slug: entry.slug,
    },
    props: {
      entry,
    },
  }));
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { entry } = Astro.props as Props;
const { Content } = await entry.render();
---

<Content />
